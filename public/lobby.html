<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynatrace Vegas Casino - Smartscape Lobby</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dt-purple': '#6C2C9C',
                        'dt-blue': '#00A1C9',
                        'dt-cyan': '#00D4FF',
                        'dt-green': '#73BE28',
                        'dt-orange': '#FFA86B',
                        'dt-yellow': '#FFD23F',
                        'dt-dark': '#151515',
                        'dt-darker': '#0A0A0A',
                        'dt-gray': '#2D2D2D',
                        'dt-light-gray': '#4A4A4A'
                    }
                }
            }
        }
    </script>
    
    <!-- External libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Responsive Layout System */
        .responsive-layout {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        .responsive-header {
            height: clamp(80px, 10vh, 120px);
            flex-shrink: 0;
            position: relative;
            z-index: 50;
        }
        
        .responsive-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        /* Pulsing dot animation */
        .pulsing-dot {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Status indicator */
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Enhanced Welcome Section Animations */
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0,-15px,0);
            }
            70% {
                transform: translate3d(0,-8px,0);
            }
            90% {
                transform: translate3d(0,-2px,0);
            }
        }

        .animate-bounce {
            animation: bounce 2s ease-in-out infinite;
        }

        /* Enhanced hover effects for feature cards */
        .feature-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .feature-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        /* Gradient text animation */
        .gradient-text {
            background-size: 200% 200%;
            animation: gradient-shift 3s ease-in-out infinite;
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Responsive Layout Grid */
        .lobby-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: clamp(2rem, 4vh, 4rem);
            padding: clamp(2rem, 4vh, 4rem);
        }
        
        /* Welcome Section Responsive */
        .welcome-section {
            padding: clamp(2rem, 4vh, 3rem);
            margin-bottom: clamp(2rem, 3vh, 3rem);
            border-radius: clamp(16px, 2vw, 24px);
        }
        
        .welcome-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            line-height: clamp(2.2rem, 4.5vw, 3.8rem);
            margin-bottom: clamp(1rem, 2vh, 1.5rem);
        }
        
        .welcome-subtitle {
            font-size: clamp(1.1rem, 2.2vw, 1.5rem);
            line-height: clamp(1.4rem, 2.8vw, 1.8rem);
            margin-bottom: clamp(1.5rem, 3vh, 2rem);
        }
        
        .welcome-description {
            font-size: clamp(0.95rem, 1.8vw, 1.1rem);
            line-height: clamp(1.4rem, 2.5vw, 1.6rem);
            margin-bottom: clamp(1.5rem, 3vh, 2rem);
        }
        
        /* Game Nodes Responsive */
        .game-nodes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: clamp(1.5rem, 3vw, 2.5rem);
            margin-bottom: clamp(2rem, 4vh, 3rem);
            max-width: 100%;
        }
        
        /* Mobile responsive - stack on very small screens */
        @media (max-width: 768px) {
            .game-nodes-grid {
                grid-template-columns: 1fr;
                gap: clamp(1rem, 2vh, 1.5rem);
            }
        }
        
        .game-node {
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));
            padding: clamp(1rem, 2vh, 2rem);
            border-radius: clamp(12px, 1.5vw, 20px);
            min-height: clamp(180px, 22vh, 280px);
            width: 100%;
        }
        
        /* Documentation Links Responsive */
        .docs-panel {
            padding: clamp(1rem, 2vh, 1.5rem);
            border-radius: clamp(8px, 1vw, 12px);
            gap: clamp(0.75rem, 1.5vh, 1rem);
        }
        
        .docs-title {
            font-size: clamp(1rem, 1.8vw, 1.2rem);
            margin-bottom: clamp(0.75rem, 1.5vh, 1rem);
        }
        
        .docs-link {
            padding: clamp(0.5rem, 1vh, 0.75rem) clamp(0.75rem, 1.5vh, 1rem);
            border-radius: clamp(4px, 0.5vw, 6px);
            font-size: clamp(0.85rem, 1.5vw, 0.95rem);
            margin-bottom: clamp(0.25rem, 0.5vh, 0.5rem);
        }
        
        /* Smartscape-inspired styles with responsive scaling */
        .smartscape-bg {
            background: 
                radial-gradient(circle at 10% 20%, rgba(108, 44, 156, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0A0A0A 0%, #151515 100%);
        }
        
        .game-node::before {
            content: '';
            position: absolute;
            inset: -2px;
            padding: 2px;
            background: linear-gradient(45deg, #00D4FF, #6C2C9C, #73BE28, #FFD23F);
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .game-node:hover::before {
            opacity: 0.8;
        }
        
        .game-node:hover {
            transform: scale(1.1) translateY(-10px);
            filter: drop-shadow(0 20px 40px rgba(0, 212, 255, 0.4));
        }
        
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00D4FF, transparent);
            opacity: 0.6;
            animation: pulse-line 2s ease-in-out infinite;
        }
        
        @keyframes pulse-line {
            0%, 100% { opacity: 0.3; transform: scaleX(1); }
            50% { opacity: 0.8; transform: scaleX(1.1); }
        }
        
        .metrics-overlay {
            background: rgba(21, 21, 21, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        .pulsing-dot {
            animation: pulse-dot 2s ease-in-out infinite;
        }
        
        @keyframes pulse-dot {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: status-blink 1.5s ease-in-out infinite;
        }
        
        @keyframes status-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .holographic-text {
            background: linear-gradient(45deg, #00D4FF, #6C2C9C, #00D4FF);
            background-size: 200% 200%;
            animation: holographic 3s ease-in-out infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        @keyframes holographic {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Side Panel Styles */
        .side-panel {
            background: 
                radial-gradient(circle at 20% 30%, rgba(108, 44, 156, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 212, 255, 0.1) 0%, transparent 40%),
                linear-gradient(145deg, rgba(21, 21, 21, 0.98), rgba(45, 45, 45, 0.95));
            backdrop-filter: blur(20px);
            box-shadow: 
                2px 0 20px rgba(0, 0, 0, 0.8),
                0 0 40px rgba(108, 44, 156, 0.3),
                inset -1px 0 0 rgba(0, 212, 255, 0.2);
        }
        
        .side-panel-open {
            transform: translateX(0) !important;
        }
        
        .main-content-shifted {
            margin-left: min(320px, 25vw);
        }
        
        .header-shifted {
            margin-left: min(320px, 25vw);
        }
        
        .config-toggle-btn {
            background: 
                radial-gradient(circle at 30% 40%, rgba(108, 44, 156, 0.6) 0%, transparent 70%),
                radial-gradient(circle at 70% 60%, rgba(0, 212, 255, 0.4) 0%, transparent 60%),
                linear-gradient(135deg, rgba(21, 21, 21, 0.9), rgba(45, 45, 45, 0.8));
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        .config-toggle-btn:hover {
            background: 
                radial-gradient(circle at 30% 40%, rgba(108, 44, 156, 0.8) 0%, transparent 70%),
                radial-gradient(circle at 70% 60%, rgba(0, 212, 255, 0.6) 0%, transparent 60%),
                linear-gradient(135deg, rgba(21, 21, 21, 0.95), rgba(45, 45, 45, 0.9));
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateY(-1px);
        }
        
        .config-toggle-btn.hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateX(-100px);
        }

        /* Hide only the sidebar metrics overlay and quick actions bottom bar */
        .fixed.top-24.right-6 { display: none !important; }
        .fixed.bottom-6 { display: none !important; }
    </style>
</head>
<body class="responsive-layout smartscape-bg text-white font-sans">
    
    <!-- Header -->
    <header class="responsive-header header bg-dt-dark/90 backdrop-blur-md border-b border-dt-cyan/20 flex-shrink-0">
        <div class="h-full w-full flex items-center justify-between px-4">
            <div class="flex items-center space-x-4 ml-16">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-dt-purple to-dt-cyan rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-lg sm:text-xl font-bold bg-gradient-to-r from-dt-cyan via-dt-purple to-dt-green bg-clip-text text-transparent leading-relaxed pb-1">
                            üåê Dynatrace Vegas
                        </h1>
                        <p class="text-xs text-dt-light-gray hidden sm:block">Smartscape Lobby</p>
                    </div>
                </div>
            </div>
            
            <!-- User info and balance -->
            <div class="flex items-center space-x-4">
                <div class="bg-dt-dark/60 border border-dt-cyan/20 rounded-lg px-3 py-2">
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-dt-green rounded-full animate-pulse"></div>
                            <span class="text-dt-cyan">Agent:</span>
                            <span id="agentName" class="font-mono text-white text-xs">Loading...</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-dt-cyan">Balance:</span>
                            <span id="balanceDisplay" class="font-mono text-dt-yellow font-semibold">$<span id="balance">1000</span></span>
                        </div>
                        <button onclick="addFunds()" class="bg-dt-green hover:bg-dt-green/80 text-white px-3 py-1 rounded text-xs font-semibold transition-colors">
                            Deposit
                        </button>
                        <button onclick="signOut()" class="bg-dt-purple hover:bg-dt-purple/80 text-white px-3 py-1 rounded text-xs font-semibold transition-colors ml-2">
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Smartscape Map -->
    <main class="responsive-main main-content">
        <!-- Game Nodes Section - With extra top padding to avoid title bar overlap -->
        <div class="max-w-7xl mx-auto px-clamp(1rem, 3vw, 3rem)">
            <section class="pt-clamp(3rem, 6vh, 4rem) pb-clamp(2rem, 4vh, 3rem)">
                <!-- Game nodes arranged in Smartscape style -->
                <div class="game-nodes-grid relative">
                    
                    <!-- Slots Game Node -->
                    <div class="game-node" onclick="navigateToGame('slots')">
                        <div class="bg-gradient-to-br from-dt-purple/20 to-dt-blue/20 rounded-2xl p-6 border border-dt-cyan/30 backdrop-blur-sm">
                            <div class="text-center">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-br from-dt-purple to-dt-blue rounded-xl flex items-center justify-center mb-4 shadow-lg overflow-hidden">
                                    <img src="/assets/slot-icons/dynatrace.png" alt="Slots" class="w-12 h-12 object-contain" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-3xl\'>üé∞</div>'">
                                </div>
                                <h3 class="text-xl font-bold text-dt-cyan mb-2">üåê Smartscape Slots</h3>
                                <p class="text-dt-light-gray text-sm mb-4">Advanced probability matrices</p>
                                <div class="flex justify-between text-xs text-dt-light-gray">
                                    <span>RTP: 96.5%</span>
                                    <span class="text-dt-green">Online</span>
                                </div>
                                <div class="mt-2 flex justify-center">
                                    <div class="flex space-x-1">
                                        <div class="pulsing-dot w-1 h-1 bg-dt-cyan rounded-full"></div>
                                        <div class="pulsing-dot w-1 h-1 bg-dt-purple rounded-full" style="animation-delay: 0.2s;"></div>
                                        <div class="pulsing-dot w-1 h-1 bg-dt-green rounded-full" style="animation-delay: 0.4s;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Blackjack Game Node -->
                    <div class="game-node" onclick="navigateToGame('blackjack')">
                        <div class="bg-gradient-to-br from-dt-blue/20 to-dt-cyan/20 rounded-2xl p-6 border border-dt-blue/30 backdrop-blur-sm">
                            <div class="text-center">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-br from-dt-blue to-dt-cyan rounded-lg flex items-center justify-center mb-4 shadow-lg overflow-hidden">
                                    <img src="/assets/blackjack/blackjack.png" alt="Blackjack" class="w-12 h-12 object-contain" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-3xl\'>üÉè</div>'">
                                </div>
                                <h3 class="text-xl font-bold text-dt-blue mb-2">‚ô†Ô∏è Service Blackjack</h3>
                                <p class="text-dt-light-gray text-sm mb-4">AI-enhanced card analysis</p>
                                <div class="flex justify-between text-xs text-dt-light-gray">
                                    <span>Basic Strategy: 99.5%</span>
                                    <span class="text-dt-green">Online</span>
                                </div>
                                <div class="mt-2 flex justify-center">
                                    <div class="flex space-x-1">
                                        <div class="pulsing-dot w-1 h-1 bg-dt-blue rounded-full"></div>
                                        <div class="pulsing-dot w-1 h-1 bg-dt-cyan rounded-full" style="animation-delay: 0.1s;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- Dice Game Node -->
                    <div class="game-node" onclick="navigateToGame('dice')">
                        <div class="bg-gradient-to-br from-dt-orange/20 to-dt-yellow/20 rounded-2xl p-6 border border-dt-orange/30 backdrop-blur-sm">
                            <div class="text-center">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-br from-dt-orange to-dt-yellow rounded-lg flex items-center justify-center mb-4 shadow-lg overflow-hidden">
                                    <img src="/assets/dice/dice.png" alt="Dice" class="w-12 h-12 object-contain" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-3xl\'>üé≤</div>'">
                                </div>
                                <h3 class="text-xl font-bold text-dt-orange mb-2">üé≤ Process Dice</h3>
                                <p class="text-dt-light-gray text-sm mb-4">Probability prediction engine</p>
                                <div class="flex justify-between text-xs text-dt-light-gray">
                                    <span>Max Payout: 30:1</span>
                                    <span class="text-dt-green">Online</span>
                                </div>
                                <div class="mt-2 flex justify-center">
                                    <div class="flex space-x-1">
                                        <div class="pulsing-dot w-1 h-1 bg-dt-orange rounded-full"></div>
                                        <div class="pulsing-dot w-1 h-1 bg-dt-yellow rounded-full" style="animation-delay: 0.4s;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </section>
        </div>
            
        <!-- Welcome Section - Full Width Below game nodes -->
        <section class="welcome-section py-clamp(3rem, 5vh, 4rem) px-clamp(1rem, 3vw, 3rem)">
            <div class="relative bg-gradient-to-br from-dt-dark/90 via-dt-purple/30 to-dt-cyan/20 border-2 border-dt-cyan/40 shadow-2xl rounded-2xl backdrop-blur-sm overflow-hidden">
                <!-- Animated background elements -->
                <div class="absolute inset-0 opacity-20">
                    <div class="absolute top-4 right-4 w-32 h-32 bg-gradient-to-br from-dt-purple/50 to-dt-cyan/50 rounded-full blur-xl animate-pulse"></div>
                    <div class="absolute bottom-4 left-4 w-24 h-24 bg-gradient-to-br from-dt-green/50 to-dt-yellow/50 rounded-full blur-lg animate-pulse" style="animation-delay: 1s;"></div>
                </div>
                
                <div class="relative p-clamp(2rem, 4vh, 3rem)">
                    <div class="text-center mb-clamp(2rem, 3vh, 2.5rem)">
                        <div class="flex items-center justify-center mb-6">
                            <div class="text-clamp(3rem, 6vw, 4rem) mr-4 animate-bounce" style="animation-delay: 0.5s;">üé∞</div>
                            <h2 class="welcome-title text-clamp(2rem, 4vw, 3rem) font-black bg-gradient-to-r from-dt-cyan via-dt-purple to-dt-green bg-clip-text text-transparent animate-pulse mb-2 pb-1">
                                Welcome to Dynatrace Vegas!
                                
                            </h2>
                            <div class="text-clamp(3rem, 6vw, 4rem) ml-4 animate-bounce" style="animation-delay: 1s;">‚ú®</div>
                        </div>
                        <div class="max-w-4xl mx-auto">
                            <p class="welcome-subtitle text-clamp(1.1rem, 2.5vw, 1.4rem) text-dt-light-gray leading-relaxed mb-4">
                                üéâ <strong class="text-dt-cyan">Ready to explore?</strong> This interactive casino experience brings together the power of Dynatrace observability with the excitement of gaming! 
                            </p>
                            <div class="flex justify-center space-x-2 mb-6">
                                <div class="pulsing-dot w-3 h-3 bg-dt-cyan rounded-full"></div>
                                <div class="pulsing-dot w-3 h-3 bg-dt-purple rounded-full" style="animation-delay: 0.3s;"></div>
                                <div class="pulsing-dot w-3 h-3 bg-dt-green rounded-full" style="animation-delay: 0.6s;"></div>
                                <div class="pulsing-dot w-3 h-3 bg-dt-yellow rounded-full" style="animation-delay: 0.9s;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-dt-dark/40 border border-dt-cyan/30 rounded-xl p-4 hover:border-dt-cyan/60 transition-all duration-300 hover:transform hover:scale-105">
                            <div class="flex items-center mb-3">
                                <div class="text-dt-cyan text-2xl mr-3">üîç</div>
                                <h3 class="text-white font-semibold">Real-time Observability</h3>
                            </div>
                            <p class="text-dt-light-gray text-sm">Watch live metrics, traces, and topology updates as you play</p>
                        </div>
                        
                        <div class="bg-dt-dark/40 border border-dt-purple/30 rounded-xl p-4 hover:border-dt-purple/60 transition-all duration-300 hover:transform hover:scale-105">
                            <div class="flex items-center mb-3">
                                <div class="text-dt-purple text-2xl mr-3">‚ö°</div>
                                <h3 class="text-white font-semibold">Microservices in Action</h3>
                            </div>
                            <p class="text-dt-light-gray text-sm">See how distributed services communicate and scale</p>
                        </div>
                        
                        <div class="bg-dt-dark/40 border border-dt-green/30 rounded-xl p-4 hover:border-dt-green/60 transition-all duration-300 hover:transform hover:scale-105">
                            <div class="flex items-center mb-3">
                                <div class="text-dt-green text-2xl mr-3">üìä</div>
                                <h3 class="text-white font-semibold">Live Analytics</h3>
                            </div>
                            <p class="text-dt-light-gray text-sm">Experience data flow and business events in real-time</p>
                        </div>
                        
                        <div class="bg-dt-dark/40 border border-dt-yellow/30 rounded-xl p-4 hover:border-dt-yellow/60 transition-all duration-300 hover:transform hover:scale-105">
                            <div class="flex items-center mb-3">
                                <div class="text-dt-yellow text-2xl mr-3">üéØ</div>
                                <h3 class="text-white font-semibold">Interactive Learning</h3>
                            </div>
                            <p class="text-dt-light-gray text-sm">Discover observability concepts through hands-on gameplay</p>
                        </div>
                        

                    </div>
                    
                    <div class="mt-8 p-6 bg-gradient-to-r from-dt-purple/20 via-dt-cyan/20 to-dt-green/20 border-2 border-dt-cyan/40 rounded-2xl text-center relative overflow-hidden">
                        <!-- Animated background -->
                        <div class="absolute inset-0 bg-gradient-to-r from-dt-purple/10 via-dt-cyan/10 to-dt-green/10 animate-pulse"></div>
                        
                        <div class="relative">
                            <div class="flex items-center justify-center mb-4">
                                <div class="text-3xl mr-3 animate-bounce">üöÄ</div>
                                <h3 class="text-2xl font-bold bg-gradient-to-r from-dt-cyan to-dt-green bg-clip-text text-transparent">Ready to Start Your Journey?</h3>
                                <div class="text-3xl ml-3 animate-bounce" style="animation-delay: 0.5s;">üéÆ</div>
                            </div>
                                                    
                        </div>
                    </div>
                </div>
        </section>
        
        <!-- Live Metrics Panel -->
        <div class="max-w-7xl mx-auto px-clamp(1rem, 3vw, 3rem) py-clamp(2rem, 4vh, 3rem)">
          
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Collapsible Side Panel for Documentation -->
        <div id="docsSidePanel" class="fixed left-0 top-0 h-full w-80 max-w-[25vw] side-panel transform -translate-x-full transition-transform duration-300 ease-in-out z-40">
            <div class="p-6 h-full overflow-y-auto">
                <!-- Panel Header -->
                <div class="flex items-center justify-between mb-6 pb-4 border-b border-dt-light-gray/20">
                    <div class="flex items-center space-x-3">
                        <div class="w-3 h-3 bg-dt-purple rounded-full animate-pulse"></div>
                        <h3 class="text-lg font-bold text-dt-cyan">üìö Documentation Hub</h3>
                    </div>
                    <button id="closeSidePanel" onclick="toggleDocsSidePanel()" class="text-dt-light-gray hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Documentation Content -->
                <div class="space-y-6" onclick="hideDocumentationPanel(event)">
                    <!-- Quick Links Section -->
                    <div class="bg-dt-darker/60 rounded-lg p-4 border border-dt-purple/30">
                        <div class="text-center mb-4">
                            <h4 class="text-dt-purple font-bold text-md mb-1">Dynatrace Resources</h4>
                            <div class="text-xs text-gray-400">Essential documentation and guides</div>
                            <div class="text-xs text-dt-cyan mt-1 bg-cyan-900/30 px-2 py-1 rounded">‚úì Always Available</div>
                        </div>
                        
                        <div class="space-y-3">
                            <a href="https://docs.dynatrace.com/docs/observe-and-explore" target="_blank" class="w-full doc-link bg-cyan-900/30 hover:bg-cyan-800/50 border border-cyan-500/50 text-cyan-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üîç</span>
                                        <span>Observability Platform</span>
                                    </span>
                                    <span class="text-xs text-cyan-400 bg-cyan-900/50 px-2 py-1 rounded">CORE</span>
                                </div>
                                <div class="text-xs text-cyan-400/70 ml-6">Complete observability for your entire stack</div>
                            </a>
                            
                            <a href="https://docs.dynatrace.com/docs/platform-modules/digital-experience" target="_blank" class="w-full doc-link bg-green-900/30 hover:bg-green-800/50 border border-green-500/50 text-green-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üë•</span>
                                        <span>Real User Monitoring</span>
                                    </span>
                                    <span class="text-xs text-green-400 bg-green-900/50 px-2 py-1 rounded">DEM</span>
                                </div>
                                <div class="text-xs text-green-400/70 ml-6">Monitor real user experiences and digital journeys</div>
                            </a>
                            
                            <a href="https://docs.dynatrace.com/docs/platform-modules/business-analytics" target="_blank" class="w-full doc-link bg-yellow-900/30 hover:bg-yellow-800/50 border border-yellow-500/50 text-yellow-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üìä</span>
                                        <span>Business Analytics</span>
                                    </span>
                                    <span class="text-xs text-yellow-400 bg-yellow-900/50 px-2 py-1 rounded">BIZOBS</span>
                                </div>
                                <div class="text-xs text-yellow-400/70 ml-6">Transform observability data into business insights</div>
                            </a>
                            
                            <a href="https://docs.dynatrace.com/docs/observe-and-explore/logs" target="_blank" class="w-full doc-link bg-orange-900/30 hover:bg-orange-800/50 border border-orange-500/50 text-orange-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üìù</span>
                                        <span>Logs & Grail</span>
                                    </span>
                                    <span class="text-xs text-orange-400 bg-orange-900/50 px-2 py-1 rounded">LOGS</span>
                                </div>
                                <div class="text-xs text-orange-400/70 ml-6">High-performance log analytics and storage</div>
                            </a>
                            
                            <a href="https://docs.dynatrace.com/docs/analyze-explore-automate/dashboards-and-notebooks" target="_blank" class="w-full doc-link bg-purple-900/30 hover:bg-purple-800/50 border border-purple-500/50 text-purple-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üìà</span>
                                        <span>Dashboards & Notebooks</span>
                                    </span>
                                    <span class="text-xs text-purple-400 bg-purple-900/50 px-2 py-1 rounded">VIZ</span>
                                </div>
                                <div class="text-xs text-purple-400/70 ml-6">Create powerful visualizations and reports</div>
                            </a>
                            
                            <a href="https://docs.dynatrace.com/docs/shortlink/dql-dynatrace-query-language-hub" target="_blank" class="w-full doc-link bg-blue-900/30 hover:bg-blue-800/50 border border-blue-500/50 text-blue-300 px-4 py-3 rounded-lg text-sm font-semibold transition-all text-left block">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="flex items-center space-x-2">
                                        <span>üîé</span>
                                        <span>DQL Query Language</span>
                                    </span>
                                    <span class="text-xs text-blue-400 bg-blue-900/50 px-2 py-1 rounded">DQL</span>
                                </div>
                                <div class="text-xs text-blue-400/70 ml-6">Powerful query language for data analysis</div>
                            </a>
                        </div>
                        
                        <div class="text-center text-xs text-gray-400 mt-4 pt-4 border-t border-gray-700/50">
                            üìñ Explore comprehensive Dynatrace documentation
                        </div>
                    </div>
                    
                    <!-- Status Information -->
                    <div class="bg-dt-darker/40 rounded-lg p-4 border border-dt-cyan/20">
                        <h4 class="text-dt-cyan font-semibold text-sm mb-2">üåê Platform Status</h4>
                        <div class="space-y-2 text-xs">
                            <div class="flex justify-between">
                                <span class="text-dt-light-gray">Documentation:</span>
                                <span class="text-dt-green">Online</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-dt-light-gray">Resources:</span>
                                <span class="text-dt-cyan">Available</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-dt-light-gray">Support:</span>
                                <span class="text-dt-yellow">24/7</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Side Panel Toggle Button -->
        <button id="docsToggleBtn" onclick="toggleDocsSidePanel()" class="fixed left-4 config-toggle-btn text-white p-3 rounded-lg shadow-lg transition-all duration-300 z-[60]" style="top: clamp(90px, calc(10vh + 10px), 130px);">
            <div class="flex flex-col items-center space-y-1">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <div class="text-xs font-semibold">Documentation</div>
            </div>
        </button>
        </div>
    </main>

    <script>
        // Toggle documentation side panel
        function toggleDocsSidePanel() {
            const sidePanel = document.getElementById('docsSidePanel');
            const toggleBtn = document.getElementById('docsToggleBtn');
            const mainContent = document.querySelector('.main-content');
            const header = document.querySelector('.header');
            const isOpen = sidePanel.classList.contains('side-panel-open');
            
            if (isOpen) {
                // Close panel
                sidePanel.classList.remove('side-panel-open');
                if (mainContent) mainContent.classList.remove('main-content-shifted');
                if (header) header.classList.remove('header-shifted');
                // Show toggle button when panel is closed
                toggleBtn.classList.remove('hidden');
            } else {
                // Open panel
                sidePanel.classList.add('side-panel-open');
                if (mainContent) mainContent.classList.add('main-content-shifted');
                if (header) header.classList.add('header-shifted');
                // Hide toggle button when panel is open
                toggleBtn.classList.add('hidden');
            }
        }
        
        // Hide documentation panel when clicked
        function hideDocumentationPanel(event) {
            // Prevent hiding if clicking on links
            if (event.target.closest('a')) {
                return;
            }
            
            const sidePanel = document.getElementById('docsSidePanel');
            const toggleBtn = document.getElementById('docsToggleBtn');
            const mainContent = document.querySelector('.main-content');
            const header = document.querySelector('.header');
            
            // Close panel
            sidePanel.classList.remove('side-panel-open');
            if (mainContent) mainContent.classList.remove('main-content-shifted');
            if (header) header.classList.remove('header-shifted');
            // Show toggle button when panel is closed
            toggleBtn.classList.remove('hidden');
        }

        function navigateToGame(gameType) {
            // Show loading animation
            const gameNode = (typeof event !== 'undefined' && event && event.currentTarget) || null;
            gsap.to(gameNode, {
                duration: 0.3,
                scale: 0.9,
                opacity: 0.8,
                yoyo: true,
                repeat: 1,
                ease: "power2.inOut",
                onComplete: () => {
                    // Navigate to game page
                    const gameUrls = {
                        'slots': 'slots.html',
                        'roulette': 'roulette.html',
                        'dice': 'dice.html',
                        'blackjack': 'blackjack.html'
                    };
                    window.location.href = gameUrls[gameType];
                }
            });
        }
        
        // Quick spin function
        async function quickSpin() {
            // Trigger a quick slots spin and show result in popup
            const username = localStorage.getItem('vegas.username') || localStorage.getItem('vegasUser') || 'Anonymous';
            
            // Ensure required fields are populated
            const requiredFields = {
                'vegas.customerName': username,
                'vegas.email': 'user@example.com',
                'vegas.companyName': 'Dynatrace',
                'vegas.persona': 'Customer',
                'vegas.booth': 'Business Analytics',
                'vegas.optIn': 'true'
            };
            
            for (const [key, defaultValue] of Object.entries(requiredFields)) {
                if (!localStorage.getItem(key)) {
                    localStorage.setItem(key, defaultValue);
                }
            }
            
            try {
                const bet = 5;
                const corrId = `sim_${Date.now()}_${Math.floor(Math.random()*1e9)}`;
                const resp = await fetch('/api/slots/spin', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        Game: 'Vegas Slots Machine',
                        BetAmount: bet,
                        Username: username,
                        CustomerName: localStorage.getItem('vegas.customerName') || username || 'Anonymous',
                        Email: localStorage.getItem('vegas.email') || '',
                        CompanyName: localStorage.getItem('vegas.companyName') || '',
                        Persona: localStorage.getItem('vegas.persona') || '',
                        Booth: localStorage.getItem('vegas.booth') || '',
                        OptIn: localStorage.getItem('vegas.optIn') === 'true',
                        WinFlag: null,
                        WinningAmount: 0,
                        LossAmount: 0,
                        Balance: parseInt(localStorage.getItem('vegasBalance') || '0'),
                        Timestamp: new Date().toISOString(),
                        Action: 'Spin',
                        Device: 'Browser-UI',
                        CorrelationId: corrId,
                        ResultIcons: [],
                        Status: 'Started',
                        ErrorType: null,
                        ErrorMessage: null,
                        StatusCode: 0
                    })
                });
                const data = await resp.json();
                showQuickSpinResult(data);
                // Prefer server-authoritative balance
                if (typeof data.newBalance === 'number') {
                    localStorage.setItem('vegasBalance', String(data.newBalance));
                    updateBalanceDisplay();
                } else {
                    // Fallback: fetch current balance from server
                    const u = await fetch(`/api/user/balance?username=${encodeURIComponent(username)}`).then(r => r.json());
                    if (typeof u.balance === 'number') {
                        localStorage.setItem('vegasBalance', String(u.balance));
                        updateBalanceDisplay();
                    }
                }
            } catch (error) {
                console.error('Quick spin error:', error);
            }
        }
        
        function showQuickSpinResult(result) {
            // Create and show result popup
            const popup = document.createElement('div');
            popup.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center';
            popup.innerHTML = `
                <div class="bg-dt-dark border border-dt-cyan/30 rounded-xl p-6 mx-4 max-w-sm w-full">
                    <h3 class="text-xl font-bold text-dt-cyan text-center mb-4">Quick Spin Result</h3>
                    <div class="flex justify-center space-x-2 mb-4">
                        ${result.result.map(icon => `<div class="w-12 h-12 bg-dt-purple rounded-lg flex items-center justify-center text-2xl">${icon[0].toUpperCase()}</div>`).join('')}
                    </div>
                    <div class="text-center">
                        <p class="text-lg ${result.win ? 'text-dt-green' : 'text-dt-light-gray'} mb-2">
                            ${result.win ? `üéâ Win: $${result.winAmount}` : 'üò¢ No win this time'}
                        </p>
                        <p class="text-sm text-dt-light-gray">Bet: $${result.betAmount}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="w-full mt-4 bg-dt-purple hover:bg-dt-purple/80 text-white py-2 rounded-lg font-semibold transition-colors">
                        Close
                    </button>
                </div>
            `;
            document.body.appendChild(popup);
            
            // Auto-close after 5 seconds
            setTimeout(() => {
                if (popup.parentElement) {
                    popup.remove();
                }
            }, 5000);
        }
        
        // Balance management
        async function addFunds() {
            const username = localStorage.getItem('vegas.username') || localStorage.getItem('vegasUser') || 'Anonymous';
            try {
                const resp = await fetch('/api/user/topup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ Username: username, Amount: 500 })
                });
                const data = await resp.json();
                if (typeof data.balance === 'number') {
                    localStorage.setItem('vegasBalance', String(data.balance));
                    updateBalanceDisplay();
                    showNotification('üí∞ $500 added to your balance!', 'success');
                } else {
                    showNotification('Top-up failed to persist.', 'error');
                }
            } catch (e) {
                showNotification('Top-up request failed.', 'error');
            }
        }
        
        function updateBalance(change) {
            const currentBalance = parseInt(localStorage.getItem('vegasBalance') || '0');
            const newBalance = Math.max(0, currentBalance + change);
            localStorage.setItem('vegasBalance', newBalance);
            updateBalanceDisplay();
        }
        
        function updateBalanceDisplay() {
            const balance = localStorage.getItem('vegasBalance') || '1000';
            const balanceElement = document.getElementById('balance');
            if (balanceElement) {
                balanceElement.textContent = balance;
            }
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-6 right-6 z-50 p-4 rounded-lg shadow-lg ${
                type === 'success' ? 'bg-dt-green text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-dt-blue text-white'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            gsap.from(notification, {
                duration: 0.3,
                x: 100,
                opacity: 0,
                ease: "back.out(1.7)"
            });
            
            // Auto remove
            setTimeout(() => {
                gsap.to(notification, {
                    duration: 0.3,
                    x: 100,
                    opacity: 0,
                    ease: "back.in(1.7)",
                    onComplete: () => notification.remove()
                });
            }, 3000);
        }
        
        // Leaderboard and analytics functions
        function showLeaderboard() {
            window.location.href = 'leaderboard.html';
        }
        
        function showAnalytics() {
            window.location.href = 'analytics.html';
        }
        
        function showProfile() {
            // Show profile modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center';
            modal.innerHTML = `
                <div class="bg-dt-dark border border-dt-cyan/30 rounded-xl p-6 mx-4 max-w-md w-full">
                    <h3 class="text-xl font-bold text-dt-cyan text-center mb-4">Agent Profile</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-dt-light-gray text-sm">Agent Name:</label>
                            <p class="text-white font-mono">${localStorage.getItem('vegas.username') || localStorage.getItem('vegasUser') || 'Anonymous'}</p>
                        </div>
                        <div>
                            <label class="text-dt-light-gray text-sm">Security Level:</label>
                            <p class="text-dt-cyan font-mono">${localStorage.getItem('securityLevel') || 'Standard'}</p>
                        </div>
                        <div>
                            <label class="text-dt-light-gray text-sm">Current Balance:</label>
                            <p class="text-dt-yellow font-mono">$${localStorage.getItem('vegasBalance') || '0'}</p>
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="w-full mt-6 bg-dt-purple hover:bg-dt-purple/80 text-white py-2 rounded-lg font-semibold transition-colors">
                        Close Profile
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Socket.io initialization
        const socket = io();
        
        // Socket event handlers
        socket.on('connect', () => {
            console.log('üîå Connected to Dynatrace Vegas');
            const username = localStorage.getItem('vegasUser');
            if (username) {
                socket.emit('user-login', { username });
            }
            // Request initial metrics on connection
            socket.emit('requestMetrics');
        });
        
        socket.on('metrics-update', (metrics) => {
            // Update real-time metrics display
            document.getElementById('activeUsers').textContent = metrics.activeUsers || 0;
            document.getElementById('totalSpins').textContent = metrics.totalSpins || 0;
            
            const winRate = metrics.totalSpins > 0 ? 
                ((metrics.totalWins / metrics.totalSpins) * 100).toFixed(1) : 0;
            document.getElementById('winRate').textContent = winRate + '%';
        });
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            // Set user info
            const username = localStorage.getItem('vegas.username') || localStorage.getItem('vegasUser') || 'Agent';
            console.log('Setting agent name to:', username);
            const agentNameElement = document.getElementById('agentName');
            if (agentNameElement) {
                agentNameElement.textContent = username;
                console.log('Agent name element updated:', agentNameElement.textContent);
            } else {
                console.log('Agent name element not found!');
            }
            // Sync balance from server for authoritative state
            try {
                const resp = await fetch('/api/user/init', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ Username: username })
                });
                const data = await resp.json();
                if (data && typeof data.balance === 'number') {
                    localStorage.setItem('vegasBalance', String(data.balance));
                }
            } catch (e) { /* ignore and show last known */ }
            updateBalanceDisplay();
            
            // Animate page entrance - simplified and guarded to avoid hiding elements
            setTimeout(() => {
                try {
                    gsap.from('.game-node', {
                        duration: 0.8,
                        y: 30,
                        opacity: 0,
                        stagger: 0.1,
                        ease: "back.out(1.7)",
                        delay: 0.1,
                        onComplete: ensureGameNodesVisible
                    });
                } catch (e) {
                    // If animation library hiccups, ensure all tiles are visible
                    ensureGameNodesVisible();
                }
                
                gsap.from('.metrics-overlay', {
                    duration: 0.6,
                    x: 30,
                    opacity: 0,
                    ease: "power3.out",
                    delay: 0.3
                });
            }, 100);

            // Extra safety: force visibility shortly after initial animations
            setTimeout(ensureGameNodesVisible, 1200);
            

        });

        // Defensive helper to guarantee all tiles are visible (avoids "only first tile visible" issue)
        function ensureGameNodesVisible() {
            document.querySelectorAll('.game-node').forEach(node => {
                node.style.opacity = '1';
                node.style.visibility = 'visible';
                node.style.transform = 'none';
                // Remove gsap inline styles that could linger
                if (node.style.willChange) node.style.willChange = '';
            });
        }

        // Listen for real-time metrics updates
        socket.on('metricsUpdate', (data) => {
            if (data.activeUsers !== undefined) {
                document.getElementById('activeUsers').textContent = data.activeUsers;
            }
            if (data.totalSpins !== undefined) {
                document.getElementById('totalSpins').textContent = data.totalSpins;
            }
            if (data.winRate !== undefined) {
                document.getElementById('winRate').textContent = data.winRate + '%';
            }
        });

        // Quick spin function for lobby
        function quickSpin() {
            // Navigate to slots game for a quick spin
            navigateToGame('slots');
        }

        // Sign out function
        function signOut() {
            // Clear localStorage
            localStorage.removeItem('vegasUsername');
            localStorage.removeItem('vegasBalance');
            localStorage.removeItem('vegasCheatsEnabled');
            
            // Redirect to main login page
            window.location.href = '/';
        }

        // Load testing functionality removed
    </script>
</body>
</html>